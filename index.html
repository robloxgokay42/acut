<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aCut - Mobil Video Editör</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #E0E0E0;
            margin: 0;
            padding: 0;
        }
        .scroll-container {
            /* Dikey kaydırmayı mümkün kılmak için */
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        .timeline-layer {
            transition: all 0.2s ease-in-out;
        }
        .timeline-layer:hover {
            transform: scaleY(1.1);
        }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <!-- Ana Uygulama Konteyneri -->
    <div id="app" class="flex flex-col h-full bg-[#1e1e1e] text-white">

        <!-- Başlık Çubuğu ve Kontroller -->
        <header class="flex items-center justify-between p-4 bg-[#2a2a2a] shadow-lg">
            <button class="text-white hover:text-gray-400 p-2 rounded-lg transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <h1 class="text-lg font-semibold">Yeni Proje</h1>
            <div class="flex items-center space-x-2">
                <button id="saveBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg shadow-md transition-colors">Kaydet</button>
                <button id="exportBtn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg shadow-md transition-colors">Dışa Aktar</button>
            </div>
        </header>

        <!-- Ana İçerik Alanı -->
        <main class="flex-1 flex flex-col md:flex-row p-4 space-y-4 md:space-y-0 md:space-x-4 overflow-hidden">
            
            <!-- Video Önizleme Alanı -->
            <div class="relative flex-1 flex items-center justify-center bg-black rounded-xl shadow-inner overflow-hidden">
                <video id="videoPreview" class="max-w-full max-h-full object-contain" controls></video>
                <div id="loadingIndicator" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-75 z-10 hidden">
                    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"></div>
                    <p class="ml-4 text-white text-lg">Renderlanıyor...</p>
                </div>
            </div>

            <!-- Sağ Panel: Kontroller ve Araçlar -->
            <div class="w-full md:w-1/3 flex flex-col bg-[#2a2a2a] rounded-xl p-4 shadow-lg scroll-container">
                <h2 class="text-xl font-bold mb-4">Araçlar</h2>
                
                <!-- 1. Katman Sistemi & Düzenleme Araçları -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Katmanlar</h3>
                    <div id="layersContainer" class="space-y-2">
                        <!-- Buraya dinamik olarak katmanlar eklenecek -->
                        <div class="timeline-layer p-3 bg-[#3a3a3a] rounded-lg shadow-sm flex justify-between items-center">
                            <span class="font-medium">Video Katmanı 1</span>
                            <div class="flex space-x-2">
                                <button class="p-1 rounded-full hover:bg-gray-700 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
                                        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                                <button class="p-1 rounded-full hover:bg-red-500 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button id="addLayerBtn" class="mt-4 w-full bg-indigo-500 hover:bg-indigo-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Katman Ekle</button>
                </div>

                <!-- 2. Efekt & Geçiş Kütüphanesi -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Efektler & Geçişler</h3>
                    <div class="grid grid-cols-3 gap-2">
                        <button class="bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition-colors">Geçiş</button>
                        <button class="bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition-colors">Filtre</button>
                        <button class="bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition-colors">Glow</button>
                        <button class="bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition-colors">VHS</button>
                        <button class="bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition-colors">Blur</button>
                        <button class="bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition-colors">Shake</button>
                    </div>
                </div>

                <!-- 3. Metin ve Altyazı Araçları -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Metin & Altyazı</h3>
                    <button id="addTextBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Metin Ekle</button>
                    <button id="aiSubtitleBtn" class="mt-2 w-full bg-purple-500 hover:bg-purple-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">AI Altyazı Oluştur</button>
                </div>
                
                <!-- 4. Müzik ve Ses Araçları -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Müzik & Ses</h3>
                    <button id="addMusicBtn" class="w-full bg-lime-500 hover:bg-lime-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Müzik Ekle</button>
                    <button id="recordAudioBtn" class="mt-2 w-full bg-rose-500 hover:bg-rose-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Ses Kaydı Yap</button>
                </div>

                <!-- 5. Sticker, Emoji ve GIF Desteği -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Sticker & GIF</h3>
                    <button id="addGifBtn" class="w-full bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">GIF Ekle (Tenor)</button>
                    <button id="addStickerBtn" class="mt-2 w-full bg-cyan-500 hover:bg-cyan-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Sticker Ekle</button>
                </div>

                <!-- 6. Hazır Şablonlar -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Şablonlar</h3>
                    <button id="templateBtn" class="w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Şablonları Görüntüle</button>
                </div>

                <!-- 7. Green Screen -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Green Screen</h3>
                    <button id="chromaKeyBtn" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Chroma Key Uygula</button>
                </div>

                <!-- 8. Otomatik Video Oluşturucu -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">aCut AI</h3>
                    <button id="autoCreateBtn" class="w-full bg-sky-500 hover:bg-sky-600 text-white py-2 rounded-lg font-medium shadow-md transition-colors">Otomatik Video Oluştur</button>
                </div>
            </div>

        </main>
        
        <!-- Video Zaman Çizelgesi (Timeline) Alanı -->
        <footer class="p-4 bg-[#2a2a2a] shadow-inner">
            <h2 class="text-lg font-semibold mb-2">Zaman Çizelgesi</h2>
            <div id="timeline" class="flex flex-col space-y-2 p-2 bg-[#1e1e1e] rounded-xl scroll-container" style="max-height: 150px;">
                <!-- Buraya videolar, sesler, metinler eklenecek -->
                <div class="h-12 bg-gray-600 rounded-lg flex items-center justify-center text-sm font-medium">Video 1</div>
                <div class="h-12 bg-lime-600 rounded-lg flex items-center justify-center text-sm font-medium">Müzik 1</div>
            </div>
        </footer>

    </div>

    <!-- Modals ve mesaj kutuları buraya eklenecek, alert() yerine kullanılacak -->
    <div id="modalContainer" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden">
        <div id="modalContent" class="bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full">
            <p id="modalMessage" class="text-center"></p>
            <button id="modalCloseBtn" class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 py-2 rounded-lg font-medium">Tamam</button>
        </div>
    </div>
    
    <script>
        // DOM elemanlarını seçme
        const videoPreview = document.getElementById('videoPreview');
        const layersContainer = document.getElementById('layersContainer');
        const timeline = document.getElementById('timeline');
        const exportBtn = document.getElementById('exportBtn');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const modalContainer = document.getElementById('modalContainer');
        const modalMessage = document.getElementById('modalMessage');
        const modalCloseBtn = document.getElementById('modalCloseBtn');
        
        // Uygulama Durumu
        let project = {
            layers: []
        };
        
        // Başlangıçta örnek bir video yükle (placeholder)
        // Gerçek uygulamada kullanıcının dosya seçmesi gerekir
        window.onload = function() {
            videoPreview.src = 'https://www.w3schools.com/html/mov_bbb.mp4';
            videoPreview.load();
        }

        // 1. Katman Sistemi (Layer-based Editing)
        function addLayer(type, content) {
            const newLayer = {
                id: crypto.randomUUID(),
                type: type,
                content: content,
                startTime: 0,
                endTime: 10,
                opacity: 1
            };
            project.layers.push(newLayer);
            renderLayers();
        }

        function renderLayers() {
            // Katmanları UI'ya çizer
            layersContainer.innerHTML = '';
            project.layers.forEach(layer => {
                const layerDiv = document.createElement('div');
                layerDiv.className = 'timeline-layer p-3 bg-[#3a3a3a] rounded-lg shadow-sm flex justify-between items-center';
                layerDiv.innerHTML = `<span class="font-medium">${layer.type.toUpperCase()} Katmanı</span>`;
                layersContainer.appendChild(layerDiv);
            });
        }
        
        document.getElementById('addLayerBtn').addEventListener('click', () => {
            // Gerçek uygulamada kullanıcıya video, görsel veya metin seçtirilmesi gerekir
            addLayer('video', 'https://placeholder.mp4');
            showMessageModal('Video katmanı eklendi.');
        });

        // 2. Efekt & Geçiş Kütüphanesi
        // Bu fonksiyonlar, seçilen katmana efekti uygular
        function applyEffect(layerId, effectName) {
            // ... Efekt uygulama mantığı buraya gelecek
            // (örneğin, video elementine CSS filtresi ekleme veya WebGL ile renderlama)
            showMessageModal(`${effectName} efekti uygulandı.`);
        }

        // 3. Metin ve Altyazı Araçları
        document.getElementById('addTextBtn').addEventListener('click', () => {
            // Kullanıcıdan metin girişi alınacak ve yeni bir metin katmanı eklenecek
            addLayer('text', 'Yeni Metin');
            showMessageModal('Metin katmanı eklendi.');
        });

        document.getElementById('aiSubtitleBtn').addEventListener('click', async () => {
            // 🎤 Otomatik konuşma-altyazı çevirisi (AI tabanlı)
            // Bu fonksiyon, videodaki sesi işleyip altyazı oluşturur.
            // Örnek bir API çağrısı:
            showMessageModal('AI altyazı oluşturma başlatılıyor...');
            loadingIndicator.classList.remove('hidden');

            const audioData = "videodan çıkarılan ses verisi";
            const prompt = `Videodan çıkarılan sesin Türkçe altyazısını oluştur: ${audioData}`;
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            try {
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const subtitles = result.candidates?.[0]?.content?.parts?.[0]?.text;
                if (subtitles) {
                    addLayer('subtitle', subtitles);
                    showMessageModal('AI altyazı başarıyla oluşturuldu ve eklendi!');
                } else {
                    showMessageModal('AI altyazı oluşturulurken bir hata oluştu.');
                }
            } catch (error) {
                console.error("API Error:", error);
                showMessageModal('API çağrısı sırasında bir hata oluştu.');
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        });

        // 4. Müzik ve Ses Araçları
        document.getElementById('addMusicBtn').addEventListener('click', () => {
            addLayer('audio', 'https://placeholder.mp3');
            showMessageModal('Müzik katmanı eklendi.');
        });
        
        // 5. Sticker, Emoji ve GIF Desteği
        document.getElementById('addGifBtn').addEventListener('click', () => {
            // Tenor API entegrasyonu buraya gelecek
            showMessageModal('GIF arama arayüzü açılacak...');
        });

        // 6. Hazır Şablonlar
        document.getElementById('templateBtn').addEventListener('click', () => {
            // Hazır şablonlar listelenecek
            showMessageModal('Hazır şablonlar gösteriliyor...');
        });

        // 7. Green Screen / Chroma Key
        document.getElementById('chromaKeyBtn').addEventListener('click', () => {
            // Seçilen katmana chroma key efekti uygulanacak
            showMessageModal('Chroma key efekti uygulaması başlatıldı.');
        });

        // 8. Otomatik Video Oluşturucu (AI destekli)
        document.getElementById('autoCreateBtn').addEventListener('click', () => {
            // Seçilen fotoğraf ve videolardan AI otomatik video oluşturacak
            showMessageModal('aCut AI otomatik video oluşturuyor...');
        });
        
        // 9. Dışa Aktarma Özellikleri (Export)
        exportBtn.addEventListener('click', () => {
            // 🕐 Render sırasında basit ilerleme çubuğu
            loadingIndicator.classList.remove('hidden');
            
            // Gerçek uygulamada, bu bir video renderlama işlemi olur.
            // Örneğin, video ve ses dosyalarını birleştirir ve efektleri uygular.
            setTimeout(() => {
                loadingIndicator.classList.add('hidden');
                showMessageModal('Video başarıyla dışa aktarıldı! 🎉');
            }, 3000); // 3 saniye süren simülasyon
        });

        // 10. Offline Mod & Hafiflik
        // PWA için 'service-worker.js' ve 'manifest.json' dosyaları gereklidir.
        // Bu iskelet dosyaya eklenmedi, ancak PWA'ya dönüştürürken bu dosyaları oluşturmalısınız.
        // `Cache API` kullanarak tüm dosyaları önbelleğe alıp offline çalışmasını sağlayabilirsiniz.

        // Modal (alert() yerine)
        function showMessageModal(message) {
            modalMessage.textContent = message;
            modalContainer.classList.remove('hidden');
        }

        modalCloseBtn.addEventListener('click', () => {
            modalContainer.classList.add('hidden');
        });
    </script>
</body>
</html>
